<html>
    <head>
        <title>Generators</title>
    </head>

    <body>
        <a href="/ejercicios/">Go back</a>
        <p><em>Abre la consola</em></p>

        <script>
            // Los generadores son funciones de las que se puede salir y volver a entrar.
            // Su contexto (asociación de variables) será conservado entre las reentradas.
            // Cada vez que llamamos next, la ejecución del generador va a continuar hasta el proximo yield
            function* simpleGenerator() {
                console.log("Generator start")
                yield " alooo"
                console.log("Generator end")
                return "termino"
            }
            const gen = simpleGenerator()
            // Podemos hacer generadores infinitos.
            function* idMaker() {
                let id = 1
                while (true) {
                    yield id++
                }
            }
            const id = idMaker()
            // Cuando llamamos next también podemos pasar valores que la función recibe.
            function* idMakerWithReset() {
                let id = 1
                let reset
                while (true) {
                    reset = yield id
                    if (reset) {
                        id = 1
                    } else id += 1
                }
            }
            const id2 = idMakerWithReset()
            // Ahora hagamos un ejemplo un poco más complejo: la secuencia fibonacci
            function* fibonacci() {
                let previus = 1
                let current = 1
                yield previus
                yield current
                while (true) {
                    let temp = current
                    current += previus
                    previus = temp
                    yield current
                }
            }
            const fib = fibonacci()
        </script>
    </body>
</html>
